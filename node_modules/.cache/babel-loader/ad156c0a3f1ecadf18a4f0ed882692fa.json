{"ast":null,"code":"import domReady from 'lite-ready';\nimport { window } from 'global';\nconst {\n  navigator\n} = window;\nconst isIE = -1 < navigator.userAgent.indexOf('MSIE ') || -1 < navigator.userAgent.indexOf('Trident/') || -1 < navigator.userAgent.indexOf('Edge/');\nconst isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n\nconst supportTransform = (() => {\n  const prefixes = 'transform WebkitTransform MozTransform'.split(' ');\n  const div = document.createElement('div');\n\n  for (let i = 0; i < prefixes.length; i += 1) {\n    if (div && div.style[prefixes[i]] !== undefined) {\n      return prefixes[i];\n    }\n  }\n\n  return false;\n})();\n\nlet $deviceHelper;\n/**\n * The most popular mobile browsers changes height after page scroll and this generates image jumping.\n * We can fix it using this workaround with vh units.\n */\n\nfunction getDeviceHeight() {\n  if (!$deviceHelper && document.body) {\n    $deviceHelper = document.createElement('div');\n    $deviceHelper.style.cssText = 'position: fixed; top: -9999px; left: 0; height: 100vh; width: 0;';\n    document.body.appendChild($deviceHelper);\n  }\n\n  return ($deviceHelper ? $deviceHelper.clientHeight : 0) || window.innerHeight || document.documentElement.clientHeight;\n} // Window height data\n\n\nlet wndH;\n\nfunction updateWndVars() {\n  if (isMobile) {\n    wndH = getDeviceHeight();\n  } else {\n    wndH = window.innerHeight || document.documentElement.clientHeight;\n  }\n}\n\nupdateWndVars();\nwindow.addEventListener('resize', updateWndVars);\nwindow.addEventListener('orientationchange', updateWndVars);\nwindow.addEventListener('load', updateWndVars);\ndomReady(() => {\n  updateWndVars({\n    type: 'dom-loaded'\n  });\n}); // list with all jarallax instances\n// need to render all in one scroll/resize event\n\nconst jarallaxList = []; // get all parents of the element.\n\nfunction getParents(elem) {\n  const parents = [];\n\n  while (null !== elem.parentElement) {\n    elem = elem.parentElement;\n\n    if (1 === elem.nodeType) {\n      parents.push(elem);\n    }\n  }\n\n  return parents;\n}\n\nfunction updateParallax() {\n  if (!jarallaxList.length) {\n    return;\n  }\n\n  jarallaxList.forEach((data, k) => {\n    const {\n      instance,\n      oldData\n    } = data;\n    const clientRect = instance.$item.getBoundingClientRect();\n    const newData = {\n      width: clientRect.width,\n      height: clientRect.height,\n      top: clientRect.top,\n      bottom: clientRect.bottom,\n      wndW: window.innerWidth,\n      wndH\n    };\n    const isResized = !oldData || oldData.wndW !== newData.wndW || oldData.wndH !== newData.wndH || oldData.width !== newData.width || oldData.height !== newData.height;\n    const isScrolled = isResized || !oldData || oldData.top !== newData.top || oldData.bottom !== newData.bottom;\n    jarallaxList[k].oldData = newData;\n\n    if (isResized) {\n      instance.onResize();\n    }\n\n    if (isScrolled) {\n      instance.onScroll();\n    }\n  });\n  window.requestAnimationFrame(updateParallax);\n}\n\nlet instanceID = 0; // Jarallax class\n\nclass Jarallax {\n  constructor(item, userOptions) {\n    const self = this;\n    self.instanceID = instanceID;\n    instanceID += 1;\n    self.$item = item;\n    self.defaults = {\n      type: 'scroll',\n      // type of parallax: scroll, scale, opacity, scale-opacity, scroll-opacity\n      speed: 0.5,\n      // supported value from -1 to 2\n      imgSrc: null,\n      imgElement: '.jarallax-img',\n      imgSize: 'cover',\n      imgPosition: '50% 50%',\n      imgRepeat: 'no-repeat',\n      // supported only for background, not for <img> tag\n      keepImg: false,\n      // keep <img> tag in it's default place\n      elementInViewport: null,\n      zIndex: -100,\n      disableParallax: false,\n      disableVideo: false,\n      // video\n      videoSrc: null,\n      videoStartTime: 0,\n      videoEndTime: 0,\n      videoVolume: 0,\n      videoLoop: true,\n      videoPlayOnlyVisible: true,\n      videoLazyLoading: true,\n      // events\n      onScroll: null,\n      // function(calculations) {}\n      onInit: null,\n      // function() {}\n      onDestroy: null,\n      // function() {}\n      onCoverImage: null // function() {}\n\n    }; // prepare data-options\n\n    const dataOptions = self.$item.dataset || {};\n    const pureDataOptions = {};\n    Object.keys(dataOptions).forEach(key => {\n      const loweCaseOption = key.substr(0, 1).toLowerCase() + key.substr(1);\n\n      if (loweCaseOption && 'undefined' !== typeof self.defaults[loweCaseOption]) {\n        pureDataOptions[loweCaseOption] = dataOptions[key];\n      }\n    });\n    self.options = self.extend({}, self.defaults, pureDataOptions, userOptions);\n    self.pureOptions = self.extend({}, self.options); // prepare 'true' and 'false' strings to boolean\n\n    Object.keys(self.options).forEach(key => {\n      if ('true' === self.options[key]) {\n        self.options[key] = true;\n      } else if ('false' === self.options[key]) {\n        self.options[key] = false;\n      }\n    }); // fix speed option [-1.0, 2.0]\n\n    self.options.speed = Math.min(2, Math.max(-1, parseFloat(self.options.speed))); // prepare disableParallax callback\n\n    if ('string' === typeof self.options.disableParallax) {\n      self.options.disableParallax = new RegExp(self.options.disableParallax);\n    }\n\n    if (self.options.disableParallax instanceof RegExp) {\n      const disableParallaxRegexp = self.options.disableParallax;\n\n      self.options.disableParallax = () => disableParallaxRegexp.test(navigator.userAgent);\n    }\n\n    if ('function' !== typeof self.options.disableParallax) {\n      self.options.disableParallax = () => false;\n    } // prepare disableVideo callback\n\n\n    if ('string' === typeof self.options.disableVideo) {\n      self.options.disableVideo = new RegExp(self.options.disableVideo);\n    }\n\n    if (self.options.disableVideo instanceof RegExp) {\n      const disableVideoRegexp = self.options.disableVideo;\n\n      self.options.disableVideo = () => disableVideoRegexp.test(navigator.userAgent);\n    }\n\n    if ('function' !== typeof self.options.disableVideo) {\n      self.options.disableVideo = () => false;\n    } // custom element to check if parallax in viewport\n\n\n    let elementInVP = self.options.elementInViewport; // get first item from array\n\n    if (elementInVP && 'object' === typeof elementInVP && 'undefined' !== typeof elementInVP.length) {\n      [elementInVP] = elementInVP;\n    } // check if dom element\n\n\n    if (!(elementInVP instanceof Element)) {\n      elementInVP = null;\n    }\n\n    self.options.elementInViewport = elementInVP;\n    self.image = {\n      src: self.options.imgSrc || null,\n      $container: null,\n      useImgTag: false,\n      // 1. Position fixed is needed for the most of browsers because absolute position have glitches\n      // 2. On MacOS with smooth scroll there is a huge lags with absolute position - https://github.com/nk-o/jarallax/issues/75\n      // 3. Previously used 'absolute' for mobile devices. But we re-tested on iPhone 12 and 'fixed' position is working better, then 'absolute', so for now position is always 'fixed'\n      position: 'fixed'\n    };\n\n    if (self.initImg() && self.canInitParallax()) {\n      self.init();\n    }\n  } // add styles to element\n  // eslint-disable-next-line class-methods-use-this\n\n\n  css(el, styles) {\n    if ('string' === typeof styles) {\n      return window.getComputedStyle(el).getPropertyValue(styles);\n    } // add transform property with vendor prefix\n\n\n    if (styles.transform && supportTransform) {\n      styles[supportTransform] = styles.transform;\n    }\n\n    Object.keys(styles).forEach(key => {\n      el.style[key] = styles[key];\n    });\n    return el;\n  } // Extend like jQuery.extend\n  // eslint-disable-next-line class-methods-use-this\n\n\n  extend(out) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    out = out || {};\n    Object.keys(args).forEach(i => {\n      if (!args[i]) {\n        return;\n      }\n\n      Object.keys(args[i]).forEach(key => {\n        out[key] = args[i][key];\n      });\n    });\n    return out;\n  } // get window size and scroll position. Useful for extensions\n  // eslint-disable-next-line class-methods-use-this\n\n\n  getWindowData() {\n    return {\n      width: window.innerWidth || document.documentElement.clientWidth,\n      height: wndH,\n      y: document.documentElement.scrollTop\n    };\n  } // Jarallax functions\n\n\n  initImg() {\n    const self = this; // find image element\n\n    let $imgElement = self.options.imgElement;\n\n    if ($imgElement && 'string' === typeof $imgElement) {\n      $imgElement = self.$item.querySelector($imgElement);\n    } // check if dom element\n\n\n    if (!($imgElement instanceof Element)) {\n      if (self.options.imgSrc) {\n        $imgElement = new Image();\n        $imgElement.src = self.options.imgSrc;\n      } else {\n        $imgElement = null;\n      }\n    }\n\n    if ($imgElement) {\n      if (self.options.keepImg) {\n        self.image.$item = $imgElement.cloneNode(true);\n      } else {\n        self.image.$item = $imgElement;\n        self.image.$itemParent = $imgElement.parentNode;\n      }\n\n      self.image.useImgTag = true;\n    } // true if there is img tag\n\n\n    if (self.image.$item) {\n      return true;\n    } // get image src\n\n\n    if (null === self.image.src) {\n      self.image.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\n      self.image.bgImage = self.css(self.$item, 'background-image');\n    }\n\n    return !(!self.image.bgImage || 'none' === self.image.bgImage);\n  }\n\n  canInitParallax() {\n    return supportTransform && !this.options.disableParallax();\n  }\n\n  init() {\n    const self = this;\n    const containerStyles = {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      width: '100%',\n      height: '100%',\n      overflow: 'hidden'\n    };\n    let imageStyles = {\n      pointerEvents: 'none',\n      transformStyle: 'preserve-3d',\n      backfaceVisibility: 'hidden',\n      willChange: 'transform,opacity'\n    };\n\n    if (!self.options.keepImg) {\n      // save default user styles\n      const curStyle = self.$item.getAttribute('style');\n\n      if (curStyle) {\n        self.$item.setAttribute('data-jarallax-original-styles', curStyle);\n      }\n\n      if (self.image.useImgTag) {\n        const curImgStyle = self.image.$item.getAttribute('style');\n\n        if (curImgStyle) {\n          self.image.$item.setAttribute('data-jarallax-original-styles', curImgStyle);\n        }\n      }\n    } // set relative position and z-index to the parent\n\n\n    if ('static' === self.css(self.$item, 'position')) {\n      self.css(self.$item, {\n        position: 'relative'\n      });\n    }\n\n    if ('auto' === self.css(self.$item, 'z-index')) {\n      self.css(self.$item, {\n        zIndex: 0\n      });\n    } // container for parallax image\n\n\n    self.image.$container = document.createElement('div');\n    self.css(self.image.$container, containerStyles);\n    self.css(self.image.$container, {\n      'z-index': self.options.zIndex\n    }); // fix for IE https://github.com/nk-o/jarallax/issues/110\n\n    if (isIE) {\n      self.css(self.image.$container, {\n        opacity: 0.9999\n      });\n    }\n\n    self.image.$container.setAttribute('id', `jarallax-container-${self.instanceID}`);\n    self.$item.appendChild(self.image.$container); // use img tag\n\n    if (self.image.useImgTag) {\n      imageStyles = self.extend({\n        'object-fit': self.options.imgSize,\n        'object-position': self.options.imgPosition,\n        // support for plugin https://github.com/bfred-it/object-fit-images\n        'font-family': `object-fit: ${self.options.imgSize}; object-position: ${self.options.imgPosition};`,\n        'max-width': 'none'\n      }, containerStyles, imageStyles); // use div with background image\n    } else {\n      self.image.$item = document.createElement('div');\n\n      if (self.image.src) {\n        imageStyles = self.extend({\n          'background-position': self.options.imgPosition,\n          'background-size': self.options.imgSize,\n          'background-repeat': self.options.imgRepeat,\n          'background-image': self.image.bgImage || `url(\"${self.image.src}\")`\n        }, containerStyles, imageStyles);\n      }\n    }\n\n    if ('opacity' === self.options.type || 'scale' === self.options.type || 'scale-opacity' === self.options.type || 1 === self.options.speed) {\n      self.image.position = 'absolute';\n    } // 1. Check if one of parents have transform style (without this check, scroll transform will be inverted if used parallax with position fixed)\n    //    discussion - https://github.com/nk-o/jarallax/issues/9\n    // 2. Check if parents have overflow scroll\n\n\n    if ('fixed' === self.image.position) {\n      const $parents = getParents(self.$item).filter(el => {\n        const styles = window.getComputedStyle(el);\n        const parentTransform = styles['-webkit-transform'] || styles['-moz-transform'] || styles.transform;\n        const overflowRegex = /(auto|scroll)/;\n        return parentTransform && 'none' !== parentTransform || overflowRegex.test(styles.overflow + styles['overflow-y'] + styles['overflow-x']);\n      });\n      self.image.position = $parents.length ? 'absolute' : 'fixed';\n    } // add position to parallax block\n\n\n    imageStyles.position = self.image.position; // insert parallax image\n\n    self.css(self.image.$item, imageStyles);\n    self.image.$container.appendChild(self.image.$item); // set initial position and size\n\n    self.onResize();\n    self.onScroll(true); // call onInit event\n\n    if (self.options.onInit) {\n      self.options.onInit.call(self);\n    } // remove default user background\n\n\n    if ('none' !== self.css(self.$item, 'background-image')) {\n      self.css(self.$item, {\n        'background-image': 'none'\n      });\n    }\n\n    self.addToParallaxList();\n  } // add to parallax instances list\n\n\n  addToParallaxList() {\n    jarallaxList.push({\n      instance: this\n    });\n\n    if (1 === jarallaxList.length) {\n      window.requestAnimationFrame(updateParallax);\n    }\n  } // remove from parallax instances list\n\n\n  removeFromParallaxList() {\n    const self = this;\n    jarallaxList.forEach((data, key) => {\n      if (data.instance.instanceID === self.instanceID) {\n        jarallaxList.splice(key, 1);\n      }\n    });\n  }\n\n  destroy() {\n    const self = this;\n    self.removeFromParallaxList(); // return styles on container as before jarallax init\n\n    const originalStylesTag = self.$item.getAttribute('data-jarallax-original-styles');\n    self.$item.removeAttribute('data-jarallax-original-styles'); // null occurs if there is no style tag before jarallax init\n\n    if (!originalStylesTag) {\n      self.$item.removeAttribute('style');\n    } else {\n      self.$item.setAttribute('style', originalStylesTag);\n    }\n\n    if (self.image.useImgTag) {\n      // return styles on img tag as before jarallax init\n      const originalStylesImgTag = self.image.$item.getAttribute('data-jarallax-original-styles');\n      self.image.$item.removeAttribute('data-jarallax-original-styles'); // null occurs if there is no style tag before jarallax init\n\n      if (!originalStylesImgTag) {\n        self.image.$item.removeAttribute('style');\n      } else {\n        self.image.$item.setAttribute('style', originalStylesTag);\n      } // move img tag to its default position\n\n\n      if (self.image.$itemParent) {\n        self.image.$itemParent.appendChild(self.image.$item);\n      }\n    } // remove additional dom elements\n\n\n    if (self.$clipStyles) {\n      self.$clipStyles.parentNode.removeChild(self.$clipStyles);\n    }\n\n    if (self.image.$container) {\n      self.image.$container.parentNode.removeChild(self.image.$container);\n    } // call onDestroy event\n\n\n    if (self.options.onDestroy) {\n      self.options.onDestroy.call(self);\n    } // delete jarallax from item\n\n\n    delete self.$item.jarallax;\n  } // it will remove some image overlapping\n  // overlapping occur due to an image position fixed inside absolute position element\n\n\n  clipContainer() {\n    // needed only when background in fixed position\n    if ('fixed' !== this.image.position) {\n      return;\n    }\n\n    const self = this;\n    const rect = self.image.$container.getBoundingClientRect();\n    const {\n      width,\n      height\n    } = rect;\n\n    if (!self.$clipStyles) {\n      self.$clipStyles = document.createElement('style');\n      self.$clipStyles.setAttribute('type', 'text/css');\n      self.$clipStyles.setAttribute('id', `jarallax-clip-${self.instanceID}`);\n      const head = document.head || document.getElementsByTagName('head')[0];\n      head.appendChild(self.$clipStyles);\n    } // clip is used for old browsers.\n    // clip-path for modern browsers (also fixes Safari v14 bug https://github.com/nk-o/jarallax/issues/181 ).\n\n\n    const styles = `#jarallax-container-${self.instanceID} {\n            clip: rect(0 ${width}px ${height}px 0);\n            clip: rect(0, ${width}px, ${height}px, 0);\n            -webkit-clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);\n            clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);\n        }`; // add clip styles inline (this method need for support IE8 and less browsers)\n\n    if (self.$clipStyles.styleSheet) {\n      self.$clipStyles.styleSheet.cssText = styles;\n    } else {\n      self.$clipStyles.innerHTML = styles;\n    }\n  }\n\n  coverImage() {\n    const self = this;\n    const rect = self.image.$container.getBoundingClientRect();\n    const contH = rect.height;\n    const {\n      speed\n    } = self.options;\n    const isScroll = 'scroll' === self.options.type || 'scroll-opacity' === self.options.type;\n    let scrollDist = 0;\n    let resultH = contH;\n    let resultMT = 0; // scroll parallax\n\n    if (isScroll) {\n      // scroll distance and height for image\n      if (0 > speed) {\n        scrollDist = speed * Math.max(contH, wndH);\n\n        if (wndH < contH) {\n          scrollDist -= speed * (contH - wndH);\n        }\n      } else {\n        scrollDist = speed * (contH + wndH);\n      } // size for scroll parallax\n\n\n      if (1 < speed) {\n        resultH = Math.abs(scrollDist - wndH);\n      } else if (0 > speed) {\n        resultH = scrollDist / speed + Math.abs(scrollDist);\n      } else {\n        resultH += (wndH - contH) * (1 - speed);\n      }\n\n      scrollDist /= 2;\n    } // store scroll distance\n\n\n    self.parallaxScrollDistance = scrollDist; // vertical center\n\n    if (isScroll) {\n      resultMT = (wndH - resultH) / 2;\n    } else {\n      resultMT = (contH - resultH) / 2;\n    } // apply result to item\n\n\n    self.css(self.image.$item, {\n      height: `${resultH}px`,\n      marginTop: `${resultMT}px`,\n      left: 'fixed' === self.image.position ? `${rect.left}px` : '0',\n      width: `${rect.width}px`\n    }); // call onCoverImage event\n\n    if (self.options.onCoverImage) {\n      self.options.onCoverImage.call(self);\n    } // return some useful data. Used in the video cover function\n\n\n    return {\n      image: {\n        height: resultH,\n        marginTop: resultMT\n      },\n      container: rect\n    };\n  }\n\n  isVisible() {\n    return this.isElementInViewport || false;\n  }\n\n  onScroll(force) {\n    const self = this;\n    const rect = self.$item.getBoundingClientRect();\n    const contT = rect.top;\n    const contH = rect.height;\n    const styles = {}; // check if in viewport\n\n    let viewportRect = rect;\n\n    if (self.options.elementInViewport) {\n      viewportRect = self.options.elementInViewport.getBoundingClientRect();\n    }\n\n    self.isElementInViewport = 0 <= viewportRect.bottom && 0 <= viewportRect.right && viewportRect.top <= wndH && viewportRect.left <= window.innerWidth; // stop calculations if item is not in viewport\n\n    if (force ? false : !self.isElementInViewport) {\n      return;\n    } // calculate parallax helping variables\n\n\n    const beforeTop = Math.max(0, contT);\n    const beforeTopEnd = Math.max(0, contH + contT);\n    const afterTop = Math.max(0, -contT);\n    const beforeBottom = Math.max(0, contT + contH - wndH);\n    const beforeBottomEnd = Math.max(0, contH - (contT + contH - wndH));\n    const afterBottom = Math.max(0, -contT + wndH - contH);\n    const fromViewportCenter = 1 - 2 * ((wndH - contT) / (wndH + contH)); // calculate on how percent of section is visible\n\n    let visiblePercent = 1;\n\n    if (contH < wndH) {\n      visiblePercent = 1 - (afterTop || beforeBottom) / contH;\n    } else if (beforeTopEnd <= wndH) {\n      visiblePercent = beforeTopEnd / wndH;\n    } else if (beforeBottomEnd <= wndH) {\n      visiblePercent = beforeBottomEnd / wndH;\n    } // opacity\n\n\n    if ('opacity' === self.options.type || 'scale-opacity' === self.options.type || 'scroll-opacity' === self.options.type) {\n      styles.transform = 'translate3d(0,0,0)';\n      styles.opacity = visiblePercent;\n    } // scale\n\n\n    if ('scale' === self.options.type || 'scale-opacity' === self.options.type) {\n      let scale = 1;\n\n      if (0 > self.options.speed) {\n        scale -= self.options.speed * visiblePercent;\n      } else {\n        scale += self.options.speed * (1 - visiblePercent);\n      }\n\n      styles.transform = `scale(${scale}) translate3d(0,0,0)`;\n    } // scroll\n\n\n    if ('scroll' === self.options.type || 'scroll-opacity' === self.options.type) {\n      let positionY = self.parallaxScrollDistance * fromViewportCenter; // fix if parallax block in absolute position\n\n      if ('absolute' === self.image.position) {\n        positionY -= contT;\n      }\n\n      styles.transform = `translate3d(0,${positionY}px,0)`;\n    }\n\n    self.css(self.image.$item, styles); // call onScroll event\n\n    if (self.options.onScroll) {\n      self.options.onScroll.call(self, {\n        section: rect,\n        beforeTop,\n        beforeTopEnd,\n        afterTop,\n        beforeBottom,\n        beforeBottomEnd,\n        afterBottom,\n        visiblePercent,\n        fromViewportCenter\n      });\n    }\n  }\n\n  onResize() {\n    this.coverImage();\n    this.clipContainer();\n  }\n\n} // global definition\n\n\nconst plugin = function (items, options) {\n  // check for dom element\n  // thanks: http://stackoverflow.com/questions/384286/javascript-isdom-how-do-you-check-if-a-javascript-object-is-a-dom-object\n  if ('object' === typeof HTMLElement ? items instanceof HTMLElement : items && 'object' === typeof items && null !== items && 1 === items.nodeType && 'string' === typeof items.nodeName) {\n    items = [items];\n  }\n\n  const len = items.length;\n  let k = 0;\n  let ret;\n\n  for (var _len2 = arguments.length, args = new Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n    args[_key2 - 2] = arguments[_key2];\n  }\n\n  for (k; k < len; k += 1) {\n    if ('object' === typeof options || 'undefined' === typeof options) {\n      if (!items[k].jarallax) {\n        items[k].jarallax = new Jarallax(items[k], options);\n      }\n    } else if (items[k].jarallax) {\n      // eslint-disable-next-line prefer-spread\n      ret = items[k].jarallax[options].apply(items[k].jarallax, args);\n    }\n\n    if ('undefined' !== typeof ret) {\n      return ret;\n    }\n  }\n\n  return items;\n};\n\nplugin.constructor = Jarallax;\nexport default plugin;","map":{"version":3,"sources":["/Users/kevin/workspace/don-website/node_modules/jarallax/src/jarallax.esm.js"],"names":["domReady","window","navigator","isIE","userAgent","indexOf","isMobile","test","supportTransform","prefixes","split","div","document","createElement","i","length","style","undefined","$deviceHelper","getDeviceHeight","body","cssText","appendChild","clientHeight","innerHeight","documentElement","wndH","updateWndVars","addEventListener","type","jarallaxList","getParents","elem","parents","parentElement","nodeType","push","updateParallax","forEach","data","k","instance","oldData","clientRect","$item","getBoundingClientRect","newData","width","height","top","bottom","wndW","innerWidth","isResized","isScrolled","onResize","onScroll","requestAnimationFrame","instanceID","Jarallax","constructor","item","userOptions","self","defaults","speed","imgSrc","imgElement","imgSize","imgPosition","imgRepeat","keepImg","elementInViewport","zIndex","disableParallax","disableVideo","videoSrc","videoStartTime","videoEndTime","videoVolume","videoLoop","videoPlayOnlyVisible","videoLazyLoading","onInit","onDestroy","onCoverImage","dataOptions","dataset","pureDataOptions","Object","keys","key","loweCaseOption","substr","toLowerCase","options","extend","pureOptions","Math","min","max","parseFloat","RegExp","disableParallaxRegexp","disableVideoRegexp","elementInVP","Element","image","src","$container","useImgTag","position","initImg","canInitParallax","init","css","el","styles","getComputedStyle","getPropertyValue","transform","out","args","getWindowData","clientWidth","y","scrollTop","$imgElement","querySelector","Image","cloneNode","$itemParent","parentNode","bgImage","containerStyles","left","overflow","imageStyles","pointerEvents","transformStyle","backfaceVisibility","willChange","curStyle","getAttribute","setAttribute","curImgStyle","opacity","$parents","filter","parentTransform","overflowRegex","call","addToParallaxList","removeFromParallaxList","splice","destroy","originalStylesTag","removeAttribute","originalStylesImgTag","$clipStyles","removeChild","jarallax","clipContainer","rect","head","getElementsByTagName","styleSheet","innerHTML","coverImage","contH","isScroll","scrollDist","resultH","resultMT","abs","parallaxScrollDistance","marginTop","container","isVisible","isElementInViewport","force","contT","viewportRect","right","beforeTop","beforeTopEnd","afterTop","beforeBottom","beforeBottomEnd","afterBottom","fromViewportCenter","visiblePercent","scale","positionY","section","plugin","items","HTMLElement","nodeName","len","ret","apply"],"mappings":"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","sourcesContent":["import domReady from 'lite-ready';\nimport { window } from 'global';\n\nconst {\n    navigator,\n} = window;\n\nconst isIE = -1 < navigator.userAgent.indexOf( 'MSIE ' ) || -1 < navigator.userAgent.indexOf( 'Trident/' ) || -1 < navigator.userAgent.indexOf( 'Edge/' );\nconst isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test( navigator.userAgent );\n\nconst supportTransform = ( () => {\n    const prefixes = 'transform WebkitTransform MozTransform'.split( ' ' );\n    const div = document.createElement( 'div' );\n    for ( let i = 0; i < prefixes.length; i += 1 ) {\n        if ( div && div.style[ prefixes[ i ] ] !== undefined ) {\n            return prefixes[ i ];\n        }\n    }\n    return false;\n} )();\n\nlet $deviceHelper;\n\n/**\n * The most popular mobile browsers changes height after page scroll and this generates image jumping.\n * We can fix it using this workaround with vh units.\n */\nfunction getDeviceHeight() {\n    if ( ! $deviceHelper && document.body ) {\n        $deviceHelper = document.createElement( 'div' );\n        $deviceHelper.style.cssText = 'position: fixed; top: -9999px; left: 0; height: 100vh; width: 0;';\n        document.body.appendChild( $deviceHelper );\n    }\n\n    return ( $deviceHelper ? $deviceHelper.clientHeight : 0 ) || window.innerHeight || document.documentElement.clientHeight;\n}\n\n// Window height data\nlet wndH;\nfunction updateWndVars() {\n    if ( isMobile ) {\n        wndH = getDeviceHeight();\n    } else {\n        wndH = window.innerHeight || document.documentElement.clientHeight;\n    }\n}\nupdateWndVars();\nwindow.addEventListener( 'resize', updateWndVars );\nwindow.addEventListener( 'orientationchange', updateWndVars );\nwindow.addEventListener( 'load', updateWndVars );\ndomReady( () => {\n    updateWndVars( {\n        type: 'dom-loaded',\n    } );\n} );\n\n// list with all jarallax instances\n// need to render all in one scroll/resize event\nconst jarallaxList = [];\n\n// get all parents of the element.\nfunction getParents( elem ) {\n    const parents = [];\n\n    while ( null !== elem.parentElement ) {\n        elem = elem.parentElement;\n\n        if ( 1 === elem.nodeType ) {\n            parents.push( elem );\n        }\n    }\n\n    return parents;\n}\n\nfunction updateParallax() {\n    if ( ! jarallaxList.length ) {\n        return;\n    }\n\n    jarallaxList.forEach( ( data, k ) => {\n        const {\n            instance,\n            oldData,\n        } = data;\n\n        const clientRect = instance.$item.getBoundingClientRect();\n\n        const newData = {\n            width: clientRect.width,\n            height: clientRect.height,\n            top: clientRect.top,\n            bottom: clientRect.bottom,\n            wndW: window.innerWidth,\n            wndH,\n        };\n\n        const isResized = ! oldData\n                           || oldData.wndW !== newData.wndW\n                           || oldData.wndH !== newData.wndH\n                           || oldData.width !== newData.width\n                           || oldData.height !== newData.height;\n        const isScrolled = isResized\n                           || ! oldData\n                           || oldData.top !== newData.top\n                           || oldData.bottom !== newData.bottom;\n\n        jarallaxList[ k ].oldData = newData;\n\n        if ( isResized ) {\n            instance.onResize();\n        }\n        if ( isScrolled ) {\n            instance.onScroll();\n        }\n    } );\n\n    window.requestAnimationFrame( updateParallax );\n}\n\nlet instanceID = 0;\n\n// Jarallax class\nclass Jarallax {\n    constructor( item, userOptions ) {\n        const self = this;\n\n        self.instanceID = instanceID;\n        instanceID += 1;\n\n        self.$item = item;\n\n        self.defaults = {\n            type: 'scroll', // type of parallax: scroll, scale, opacity, scale-opacity, scroll-opacity\n            speed: 0.5, // supported value from -1 to 2\n            imgSrc: null,\n            imgElement: '.jarallax-img',\n            imgSize: 'cover',\n            imgPosition: '50% 50%',\n            imgRepeat: 'no-repeat', // supported only for background, not for <img> tag\n            keepImg: false, // keep <img> tag in it's default place\n            elementInViewport: null,\n            zIndex: -100,\n            disableParallax: false,\n            disableVideo: false,\n\n            // video\n            videoSrc: null,\n            videoStartTime: 0,\n            videoEndTime: 0,\n            videoVolume: 0,\n            videoLoop: true,\n            videoPlayOnlyVisible: true,\n            videoLazyLoading: true,\n\n            // events\n            onScroll: null, // function(calculations) {}\n            onInit: null, // function() {}\n            onDestroy: null, // function() {}\n            onCoverImage: null, // function() {}\n        };\n\n        // prepare data-options\n        const dataOptions = self.$item.dataset || {};\n        const pureDataOptions = {};\n        Object.keys( dataOptions ).forEach( ( key ) => {\n            const loweCaseOption = key.substr( 0, 1 ).toLowerCase() + key.substr( 1 );\n            if ( loweCaseOption && 'undefined' !== typeof self.defaults[ loweCaseOption ] ) {\n                pureDataOptions[ loweCaseOption ] = dataOptions[ key ];\n            }\n        } );\n\n        self.options = self.extend( {}, self.defaults, pureDataOptions, userOptions );\n        self.pureOptions = self.extend( {}, self.options );\n\n        // prepare 'true' and 'false' strings to boolean\n        Object.keys( self.options ).forEach( ( key ) => {\n            if ( 'true' === self.options[ key ] ) {\n                self.options[ key ] = true;\n            } else if ( 'false' === self.options[ key ] ) {\n                self.options[ key ] = false;\n            }\n        } );\n\n        // fix speed option [-1.0, 2.0]\n        self.options.speed = Math.min( 2, Math.max( -1, parseFloat( self.options.speed ) ) );\n\n        // prepare disableParallax callback\n        if ( 'string' === typeof self.options.disableParallax ) {\n            self.options.disableParallax = new RegExp( self.options.disableParallax );\n        }\n        if ( self.options.disableParallax instanceof RegExp ) {\n            const disableParallaxRegexp = self.options.disableParallax;\n            self.options.disableParallax = () => disableParallaxRegexp.test( navigator.userAgent );\n        }\n        if ( 'function' !== typeof self.options.disableParallax ) {\n            self.options.disableParallax = () => false;\n        }\n\n        // prepare disableVideo callback\n        if ( 'string' === typeof self.options.disableVideo ) {\n            self.options.disableVideo = new RegExp( self.options.disableVideo );\n        }\n        if ( self.options.disableVideo instanceof RegExp ) {\n            const disableVideoRegexp = self.options.disableVideo;\n            self.options.disableVideo = () => disableVideoRegexp.test( navigator.userAgent );\n        }\n        if ( 'function' !== typeof self.options.disableVideo ) {\n            self.options.disableVideo = () => false;\n        }\n\n        // custom element to check if parallax in viewport\n        let elementInVP = self.options.elementInViewport;\n        // get first item from array\n        if ( elementInVP && 'object' === typeof elementInVP && 'undefined' !== typeof elementInVP.length ) {\n            [ elementInVP ] = elementInVP;\n        }\n        // check if dom element\n        if ( ! ( elementInVP instanceof Element ) ) {\n            elementInVP = null;\n        }\n        self.options.elementInViewport = elementInVP;\n\n        self.image = {\n            src: self.options.imgSrc || null,\n            $container: null,\n            useImgTag: false,\n\n            // 1. Position fixed is needed for the most of browsers because absolute position have glitches\n            // 2. On MacOS with smooth scroll there is a huge lags with absolute position - https://github.com/nk-o/jarallax/issues/75\n            // 3. Previously used 'absolute' for mobile devices. But we re-tested on iPhone 12 and 'fixed' position is working better, then 'absolute', so for now position is always 'fixed'\n            position: 'fixed',\n        };\n\n        if ( self.initImg() && self.canInitParallax() ) {\n            self.init();\n        }\n    }\n\n    // add styles to element\n    // eslint-disable-next-line class-methods-use-this\n    css( el, styles ) {\n        if ( 'string' === typeof styles ) {\n            return window.getComputedStyle( el ).getPropertyValue( styles );\n        }\n\n        // add transform property with vendor prefix\n        if ( styles.transform && supportTransform ) {\n            styles[ supportTransform ] = styles.transform;\n        }\n\n        Object.keys( styles ).forEach( ( key ) => {\n            el.style[ key ] = styles[ key ];\n        } );\n        return el;\n    }\n\n    // Extend like jQuery.extend\n    // eslint-disable-next-line class-methods-use-this\n    extend( out, ...args ) {\n        out = out || {};\n\n        Object.keys( args ).forEach( ( i ) => {\n            if ( ! args[ i ] ) {\n                return;\n            }\n            Object.keys( args[ i ] ).forEach( ( key ) => {\n                out[ key ] = args[ i ][ key ];\n            } );\n        } );\n\n        return out;\n    }\n\n    // get window size and scroll position. Useful for extensions\n    // eslint-disable-next-line class-methods-use-this\n    getWindowData() {\n        return {\n            width: window.innerWidth || document.documentElement.clientWidth,\n            height: wndH,\n            y: document.documentElement.scrollTop,\n        };\n    }\n\n    // Jarallax functions\n    initImg() {\n        const self = this;\n\n        // find image element\n        let $imgElement = self.options.imgElement;\n        if ( $imgElement && 'string' === typeof $imgElement ) {\n            $imgElement = self.$item.querySelector( $imgElement );\n        }\n\n        // check if dom element\n        if ( ! ( $imgElement instanceof Element ) ) {\n            if ( self.options.imgSrc ) {\n                $imgElement = new Image();\n                $imgElement.src = self.options.imgSrc;\n            } else {\n                $imgElement = null;\n            }\n        }\n\n        if ( $imgElement ) {\n            if ( self.options.keepImg ) {\n                self.image.$item = $imgElement.cloneNode( true );\n            } else {\n                self.image.$item = $imgElement;\n                self.image.$itemParent = $imgElement.parentNode;\n            }\n            self.image.useImgTag = true;\n        }\n\n        // true if there is img tag\n        if ( self.image.$item ) {\n            return true;\n        }\n\n        // get image src\n        if ( null === self.image.src ) {\n            self.image.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\n            self.image.bgImage = self.css( self.$item, 'background-image' );\n        }\n        return ! ( ! self.image.bgImage || 'none' === self.image.bgImage );\n    }\n\n    canInitParallax() {\n        return supportTransform && ! this.options.disableParallax();\n    }\n\n    init() {\n        const self = this;\n        const containerStyles = {\n            position: 'absolute',\n            top: 0,\n            left: 0,\n            width: '100%',\n            height: '100%',\n            overflow: 'hidden',\n        };\n        let imageStyles = {\n            pointerEvents: 'none',\n            transformStyle: 'preserve-3d',\n            backfaceVisibility: 'hidden',\n            willChange: 'transform,opacity',\n        };\n\n        if ( ! self.options.keepImg ) {\n            // save default user styles\n            const curStyle = self.$item.getAttribute( 'style' );\n            if ( curStyle ) {\n                self.$item.setAttribute( 'data-jarallax-original-styles', curStyle );\n            }\n            if ( self.image.useImgTag ) {\n                const curImgStyle = self.image.$item.getAttribute( 'style' );\n                if ( curImgStyle ) {\n                    self.image.$item.setAttribute( 'data-jarallax-original-styles', curImgStyle );\n                }\n            }\n        }\n\n        // set relative position and z-index to the parent\n        if ( 'static' === self.css( self.$item, 'position' ) ) {\n            self.css( self.$item, {\n                position: 'relative',\n            } );\n        }\n        if ( 'auto' === self.css( self.$item, 'z-index' ) ) {\n            self.css( self.$item, {\n                zIndex: 0,\n            } );\n        }\n\n        // container for parallax image\n        self.image.$container = document.createElement( 'div' );\n        self.css( self.image.$container, containerStyles );\n        self.css( self.image.$container, {\n            'z-index': self.options.zIndex,\n        } );\n\n        // fix for IE https://github.com/nk-o/jarallax/issues/110\n        if ( isIE ) {\n            self.css( self.image.$container, {\n                opacity: 0.9999,\n            } );\n        }\n\n        self.image.$container.setAttribute( 'id', `jarallax-container-${ self.instanceID }` );\n        self.$item.appendChild( self.image.$container );\n\n        // use img tag\n        if ( self.image.useImgTag ) {\n            imageStyles = self.extend( {\n                'object-fit': self.options.imgSize,\n                'object-position': self.options.imgPosition,\n                // support for plugin https://github.com/bfred-it/object-fit-images\n                'font-family': `object-fit: ${ self.options.imgSize }; object-position: ${ self.options.imgPosition };`,\n                'max-width': 'none',\n            }, containerStyles, imageStyles );\n\n        // use div with background image\n        } else {\n            self.image.$item = document.createElement( 'div' );\n            if ( self.image.src ) {\n                imageStyles = self.extend( {\n                    'background-position': self.options.imgPosition,\n                    'background-size': self.options.imgSize,\n                    'background-repeat': self.options.imgRepeat,\n                    'background-image': self.image.bgImage || `url(\"${ self.image.src }\")`,\n                }, containerStyles, imageStyles );\n            }\n        }\n\n        if ( 'opacity' === self.options.type || 'scale' === self.options.type || 'scale-opacity' === self.options.type || 1 === self.options.speed ) {\n            self.image.position = 'absolute';\n        }\n\n        // 1. Check if one of parents have transform style (without this check, scroll transform will be inverted if used parallax with position fixed)\n        //    discussion - https://github.com/nk-o/jarallax/issues/9\n        // 2. Check if parents have overflow scroll\n        if ( 'fixed' === self.image.position ) {\n            const $parents = getParents( self.$item ).filter( ( el ) => {\n                const styles = window.getComputedStyle( el );\n                const parentTransform = styles[ '-webkit-transform' ] || styles[ '-moz-transform' ] || styles.transform;\n                const overflowRegex = /(auto|scroll)/;\n\n                return ( parentTransform && 'none' !== parentTransform ) || overflowRegex.test( styles.overflow + styles[ 'overflow-y' ] + styles[ 'overflow-x' ] );\n            } );\n\n            self.image.position = $parents.length ? 'absolute' : 'fixed';\n        }\n\n        // add position to parallax block\n        imageStyles.position = self.image.position;\n\n        // insert parallax image\n        self.css( self.image.$item, imageStyles );\n        self.image.$container.appendChild( self.image.$item );\n\n        // set initial position and size\n        self.onResize();\n        self.onScroll( true );\n\n        // call onInit event\n        if ( self.options.onInit ) {\n            self.options.onInit.call( self );\n        }\n\n        // remove default user background\n        if ( 'none' !== self.css( self.$item, 'background-image' ) ) {\n            self.css( self.$item, {\n                'background-image': 'none',\n            } );\n        }\n\n        self.addToParallaxList();\n    }\n\n    // add to parallax instances list\n    addToParallaxList() {\n        jarallaxList.push( {\n            instance: this,\n        } );\n\n        if ( 1 === jarallaxList.length ) {\n            window.requestAnimationFrame( updateParallax );\n        }\n    }\n\n    // remove from parallax instances list\n    removeFromParallaxList() {\n        const self = this;\n\n        jarallaxList.forEach( ( data, key ) => {\n            if ( data.instance.instanceID === self.instanceID ) {\n                jarallaxList.splice( key, 1 );\n            }\n        } );\n    }\n\n    destroy() {\n        const self = this;\n\n        self.removeFromParallaxList();\n\n        // return styles on container as before jarallax init\n        const originalStylesTag = self.$item.getAttribute( 'data-jarallax-original-styles' );\n        self.$item.removeAttribute( 'data-jarallax-original-styles' );\n        // null occurs if there is no style tag before jarallax init\n        if ( ! originalStylesTag ) {\n            self.$item.removeAttribute( 'style' );\n        } else {\n            self.$item.setAttribute( 'style', originalStylesTag );\n        }\n\n        if ( self.image.useImgTag ) {\n            // return styles on img tag as before jarallax init\n            const originalStylesImgTag = self.image.$item.getAttribute( 'data-jarallax-original-styles' );\n            self.image.$item.removeAttribute( 'data-jarallax-original-styles' );\n            // null occurs if there is no style tag before jarallax init\n            if ( ! originalStylesImgTag ) {\n                self.image.$item.removeAttribute( 'style' );\n            } else {\n                self.image.$item.setAttribute( 'style', originalStylesTag );\n            }\n\n            // move img tag to its default position\n            if ( self.image.$itemParent ) {\n                self.image.$itemParent.appendChild( self.image.$item );\n            }\n        }\n\n        // remove additional dom elements\n        if ( self.$clipStyles ) {\n            self.$clipStyles.parentNode.removeChild( self.$clipStyles );\n        }\n        if ( self.image.$container ) {\n            self.image.$container.parentNode.removeChild( self.image.$container );\n        }\n\n        // call onDestroy event\n        if ( self.options.onDestroy ) {\n            self.options.onDestroy.call( self );\n        }\n\n        // delete jarallax from item\n        delete self.$item.jarallax;\n    }\n\n    // it will remove some image overlapping\n    // overlapping occur due to an image position fixed inside absolute position element\n    clipContainer() {\n        // needed only when background in fixed position\n        if ( 'fixed' !== this.image.position ) {\n            return;\n        }\n\n        const self = this;\n        const rect = self.image.$container.getBoundingClientRect();\n        const { width, height } = rect;\n\n        if ( ! self.$clipStyles ) {\n            self.$clipStyles = document.createElement( 'style' );\n            self.$clipStyles.setAttribute( 'type', 'text/css' );\n            self.$clipStyles.setAttribute( 'id', `jarallax-clip-${ self.instanceID }` );\n            const head = document.head || document.getElementsByTagName( 'head' )[ 0 ];\n            head.appendChild( self.$clipStyles );\n        }\n\n        // clip is used for old browsers.\n        // clip-path for modern browsers (also fixes Safari v14 bug https://github.com/nk-o/jarallax/issues/181 ).\n        const styles = `#jarallax-container-${ self.instanceID } {\n            clip: rect(0 ${ width }px ${ height }px 0);\n            clip: rect(0, ${ width }px, ${ height }px, 0);\n            -webkit-clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);\n            clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);\n        }`;\n\n        // add clip styles inline (this method need for support IE8 and less browsers)\n        if ( self.$clipStyles.styleSheet ) {\n            self.$clipStyles.styleSheet.cssText = styles;\n        } else {\n            self.$clipStyles.innerHTML = styles;\n        }\n    }\n\n    coverImage() {\n        const self = this;\n\n        const rect = self.image.$container.getBoundingClientRect();\n        const contH = rect.height;\n        const { speed } = self.options;\n        const isScroll = 'scroll' === self.options.type || 'scroll-opacity' === self.options.type;\n        let scrollDist = 0;\n        let resultH = contH;\n        let resultMT = 0;\n\n        // scroll parallax\n        if ( isScroll ) {\n            // scroll distance and height for image\n            if ( 0 > speed ) {\n                scrollDist = speed * Math.max( contH, wndH );\n\n                if ( wndH < contH ) {\n                    scrollDist -= speed * ( contH - wndH );\n                }\n            } else {\n                scrollDist = speed * ( contH + wndH );\n            }\n\n            // size for scroll parallax\n            if ( 1 < speed ) {\n                resultH = Math.abs( scrollDist - wndH );\n            } else if ( 0 > speed ) {\n                resultH = scrollDist / speed + Math.abs( scrollDist );\n            } else {\n                resultH += ( wndH - contH ) * ( 1 - speed );\n            }\n\n            scrollDist /= 2;\n        }\n\n        // store scroll distance\n        self.parallaxScrollDistance = scrollDist;\n\n        // vertical center\n        if ( isScroll ) {\n            resultMT = ( wndH - resultH ) / 2;\n        } else {\n            resultMT = ( contH - resultH ) / 2;\n        }\n\n        // apply result to item\n        self.css( self.image.$item, {\n            height: `${ resultH }px`,\n            marginTop: `${ resultMT }px`,\n            left: 'fixed' === self.image.position ? `${ rect.left }px` : '0',\n            width: `${ rect.width }px`,\n        } );\n\n        // call onCoverImage event\n        if ( self.options.onCoverImage ) {\n            self.options.onCoverImage.call( self );\n        }\n\n        // return some useful data. Used in the video cover function\n        return {\n            image: {\n                height: resultH,\n                marginTop: resultMT,\n            },\n            container: rect,\n        };\n    }\n\n    isVisible() {\n        return this.isElementInViewport || false;\n    }\n\n    onScroll( force ) {\n        const self = this;\n\n        const rect = self.$item.getBoundingClientRect();\n        const contT = rect.top;\n        const contH = rect.height;\n        const styles = {};\n\n        // check if in viewport\n        let viewportRect = rect;\n        if ( self.options.elementInViewport ) {\n            viewportRect = self.options.elementInViewport.getBoundingClientRect();\n        }\n        self.isElementInViewport = 0 <= viewportRect.bottom\n            && 0 <= viewportRect.right\n            && viewportRect.top <= wndH\n            && viewportRect.left <= window.innerWidth;\n\n        // stop calculations if item is not in viewport\n        if ( force ? false : ! self.isElementInViewport ) {\n            return;\n        }\n\n        // calculate parallax helping variables\n        const beforeTop = Math.max( 0, contT );\n        const beforeTopEnd = Math.max( 0, contH + contT );\n        const afterTop = Math.max( 0, -contT );\n        const beforeBottom = Math.max( 0, contT + contH - wndH );\n        const beforeBottomEnd = Math.max( 0, contH - ( contT + contH - wndH ) );\n        const afterBottom = Math.max( 0, -contT + wndH - contH );\n        const fromViewportCenter = 1 - 2 * ( ( wndH - contT ) / ( wndH + contH ) );\n\n        // calculate on how percent of section is visible\n        let visiblePercent = 1;\n        if ( contH < wndH ) {\n            visiblePercent = 1 - ( afterTop || beforeBottom ) / contH;\n        } else if ( beforeTopEnd <= wndH ) {\n            visiblePercent = beforeTopEnd / wndH;\n        } else if ( beforeBottomEnd <= wndH ) {\n            visiblePercent = beforeBottomEnd / wndH;\n        }\n\n        // opacity\n        if ( 'opacity' === self.options.type || 'scale-opacity' === self.options.type || 'scroll-opacity' === self.options.type ) {\n            styles.transform = 'translate3d(0,0,0)';\n            styles.opacity = visiblePercent;\n        }\n\n        // scale\n        if ( 'scale' === self.options.type || 'scale-opacity' === self.options.type ) {\n            let scale = 1;\n            if ( 0 > self.options.speed ) {\n                scale -= self.options.speed * visiblePercent;\n            } else {\n                scale += self.options.speed * ( 1 - visiblePercent );\n            }\n            styles.transform = `scale(${ scale }) translate3d(0,0,0)`;\n        }\n\n        // scroll\n        if ( 'scroll' === self.options.type || 'scroll-opacity' === self.options.type ) {\n            let positionY = self.parallaxScrollDistance * fromViewportCenter;\n\n            // fix if parallax block in absolute position\n            if ( 'absolute' === self.image.position ) {\n                positionY -= contT;\n            }\n\n            styles.transform = `translate3d(0,${ positionY }px,0)`;\n        }\n\n        self.css( self.image.$item, styles );\n\n        // call onScroll event\n        if ( self.options.onScroll ) {\n            self.options.onScroll.call( self, {\n                section: rect,\n\n                beforeTop,\n                beforeTopEnd,\n                afterTop,\n                beforeBottom,\n                beforeBottomEnd,\n                afterBottom,\n\n                visiblePercent,\n                fromViewportCenter,\n            } );\n        }\n    }\n\n    onResize() {\n        this.coverImage();\n        this.clipContainer();\n    }\n}\n\n// global definition\nconst plugin = function( items, options, ...args ) {\n    // check for dom element\n    // thanks: http://stackoverflow.com/questions/384286/javascript-isdom-how-do-you-check-if-a-javascript-object-is-a-dom-object\n    if ( 'object' === typeof HTMLElement ? items instanceof HTMLElement : items && 'object' === typeof items && null !== items && 1 === items.nodeType && 'string' === typeof items.nodeName ) {\n        items = [ items ];\n    }\n\n    const len = items.length;\n    let k = 0;\n    let ret;\n\n    for ( k; k < len; k += 1 ) {\n        if ( 'object' === typeof options || 'undefined' === typeof options ) {\n            if ( ! items[ k ].jarallax ) {\n                items[ k ].jarallax = new Jarallax( items[ k ], options );\n            }\n        } else if ( items[ k ].jarallax ) {\n            // eslint-disable-next-line prefer-spread\n            ret = items[ k ].jarallax[ options ].apply( items[ k ].jarallax, args );\n        }\n        if ( 'undefined' !== typeof ret ) {\n            return ret;\n        }\n    }\n\n    return items;\n};\nplugin.constructor = Jarallax;\n\nexport default plugin;\n"]},"metadata":{},"sourceType":"module"}